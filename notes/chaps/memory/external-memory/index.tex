\subsection{External Memory}

\subsubsection{Hard Disk Drives (HDD) - Magnetic Disks}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.58\textwidth]{chaps/memory/external-memory/hdd-layout.jpg}
    \caption{Disk Data Layout}
\end{figure}

\emph{Terminologies about the HDD layout and components}
\begin{itemize}
    \item \textbf{Platter}: Magnetically coated disks.
    \item \textbf{Track}: Concentric rings on a platter.
    \item \textbf{Sector}: A segment of a track, usually 512 bytes.
    \item \textbf{Cylinder}: Tracks of different platters that are under the read/write head
        at the same time.
\end{itemize}

\emph{Formats of Tracks}

Tracks contain sectors that hold data and other bits that
are useful for the disk controller. The example of a track format can be:
\begin{itemize}
    \item Each track contains 30 sectors of fixed-length 600 bytes, with 512 bytes for data
        and 88 bytes for control information.
    \item Each sector contains several fields: \begin{itemize}
        \item \textbf{Gap 1} (17 bytes): Used to separate sectors.
        \item \textbf{ID Field}: Contains Synch (1 byte), Track, Head, Sector \# (4 bytes),
            and CRC (2 bytes).
        \item \textbf{Gap 2} (41 bytes): Used to separate ID field and data field.
        \item \textbf{Data Field} (515 bytes): Contains 1 Synch byte, 512 bytes of data, and 2
            CRC bytes.
        \item \textbf{Gap 3} (40 bytes)
    \end{itemize}
\end{itemize}

{% wrapfigure begins
\begin{wrapfigure}{l}{0.6\textwidth}
    \centering
    \begin{subfigure}{0.28\textwidth}
        \centering
        \includegraphics[width=\textwidth]{chaps/memory/external-memory/disk-layout-cav.png}
        \caption{CAV}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.28\textwidth}
        \centering
        \includegraphics[width=\textwidth]{chaps/memory/external-memory/disk-layout-mzr.png}
        \caption{MZR}
    \end{subfigure}
    \caption{Disk Layout Methods}
\end{wrapfigure}

\emph{Disk Layout Methods}
\begin{itemize}
    \item \textbf{Constant Angular Velocity (CAV)}: Blocks of data can be directly addressed
        by track and sector. Read/write is easy. However, density of data decreases from the
        inner tracks to the outer tracks, which wastes space.
    \item \textbf{Multiple Zone Recording (MZR)}: Divides the disk into zones, with each zone
        having a different number of sectors per track. Note that the data density is not
        exactly the same, but only approximated to be the same. This allows maximised storage
        capacity.
\end{itemize}
}% wrapfigure ends

\pagebreak

\emph{Disk Access Time}

\begin{itemize}
    \item \textbf{Seek TIme}: Move the read/write head from one cylinder to another.
        Depends on start and destination. Typical values: 5 - 15 ms (start up), 0.2 - 1 ms
        (consecutive tracks).
    \item \textbf{Rotational Latency}: Time for the required sector to rotate under the head.
        Average latency is the time for half a revolution.
        \begin{example}
            For a disk rotating at 7200 RPM, the average latency is given by: \[
                \frac{1}{7200 \text{ rotation minute}^{-1}}
                \times \frac{60\text{ s}}{1\text{ minute}}
                \times 1000 \text{ ms s}^{-1}
                \times \frac{1}{2} \text{ rotation} = \boxed{4.17 \text{ ms}}
            \]
        \end{example}
    \item \textbf{Data Transfer Time} ($t_T$): Typically, $t_T \ll \text{seek} + \text{latency}$.
        \[
            t_T = \frac{b}{N} \times \frac{1}{r} 
        \]
        where $b$ is bytes to be transfered, $N$ is bytes per track, and $r$ is the rotation
        speed in rps.
\end{itemize}

\subsubsection{Redundant Array of Independent Disks (RAID)}